{
  log {
    output file /var/log/caddy/access.log
    format json
  }
}

etobaza.dimalip.in {
    reverse_proxy http://127.0.0.1:5003 {
      transport http {
        read_timeout 360s
      }
    }
    log
}

coach.dimalip.in {
    reverse_proxy localhost:8080
}

rumi.dimalip.in {
    reverse_proxy localhost:9090
}

dimaist.dimalip.in {
    reverse_proxy localhost:3000
}

silence.dimalip.in {
    reverse_proxy localhost:4000
}

papujki.space {
    reverse_proxy localhost:3333
}

life.dimalip.in {
    # Proxy API requests to backend
    handle /api/* {
        reverse_proxy localhost:7777
    }

    # Serve static files and SPA
    handle {
        root * /opt/life/frontend/dist
        encode gzip
        try_files {path} /index.html
        file_server
    }
}
