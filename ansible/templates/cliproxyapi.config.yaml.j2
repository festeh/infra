host: "127.0.0.1"
port: {{ cliproxyapi_port }}

tls:
  enable: false

remote-management:
  allow-remote: true
  secret-key: "{{ cliproxyapi_mgmt_key }}"
  disable-control-panel: false

auth-dir: "{{ cliproxyapi_config_dir }}"

api-keys:
{% for key in cliproxyapi_api_keys %}
  - "{{ key }}"
{% endfor %}

debug: true

commercial-mode: false

logging-to-file: false

usage-statistics-enabled: true

routing:
  strategy: "fill-first"

quota-exceeded:
  switch-project: true
  switch-preview-model: true

force-model-prefix: false

ws-auth: true

request-retry: 3
max-retry-interval: 30

nonstream-keepalive-interval: 15

streaming:
  keepalive-seconds: 15
  bootstrap-retries: 1
{% if openrouter_api_keys is defined or groq_api_keys is defined or kimi_api_keys is defined %}

openai-compatibility:
{% if openrouter_api_keys is defined %}
  - name: "openrouter"
    base-url: "https://openrouter.ai/api/v1"
    api-key-entries:
{% for key in openrouter_api_keys %}
      - api-key: "{{ key }}"
{% endfor %}
{% endif %}
{% if groq_api_keys is defined %}
  - name: "groq"
    base-url: "https://api.groq.com/openai/v1"
    api-key-entries:
{% for key in groq_api_keys %}
      - api-key: "{{ key }}"
{% endfor %}
    models:
      - name: "moonshotai/kimi-k2-instruct"
      - name: "qwen/qwen3-32b"
{% endif %}
{% if kimi_api_keys is defined %}
  - name: "kimi"
    base-url: "https://api.kimi.com/coding/v1"
    headers:
      User-Agent: "KimiCLI/1.12"
    api-key-entries:
{% for key in kimi_api_keys %}
      - api-key: "{{ key }}"
{% endfor %}
    models:
      - name: "kimi-for-code"
{% endif %}
{% endif %}
